```mermaid
%%{init: {'theme': 'dark'}}%%
flowchart TB
    subgraph MAILCOW["ğŸ“§ MAILCOW ARCHITECTURE - VERIFIED"]
        direction TB
    end
    
    subgraph ENTRY["ğŸšª Entry Points"]
        SMTP["ğŸ“¨ SMTP<br/>Port 25/587/465"]
        IMAP["ğŸ“¬ IMAP<br/>Port 993"]
        WEB["ğŸŒ Webmail<br/>mail.quietly.online"]
    end
    
    subgraph FRONTEND["Frontend Layer"]
        NGINX["ğŸŒ nginx-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>TLS Termination<br/>Reverse Proxy<br/>ğŸ’¾ 18.87 MiB RAM<br/>Up 5 days"]
    end
    
    subgraph MTA["Mail Transfer"]
        POSTFIX["ğŸ“¨ postfix-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>SMTP MTA<br/>TLS: AES_256_GCM_SHA384<br/>ğŸ’¾ 80.71 MiB RAM<br/>Up 5 days"]
        
        TLSPOL["ğŸ”’ postfix-tlspol<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>TLS Policy Enforcement<br/>ğŸ’¾ 42.93 MiB RAM"]
    end
    
    subgraph MDA["Mail Delivery"]
        DOVECOT["ğŸ“¬ dovecot-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>IMAP/POP3 Server<br/>Mailbox Storage<br/>ğŸ’¾ 74.67 MiB RAM<br/>Up 5 days"]
    end
    
    subgraph SECURITY["ğŸ“§ Mail Security"]
        RSPAMD["ğŸ›¡ï¸ rspamd-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Spam Filtering<br/>ML-based Detection<br/>ğŸ’¾ 218.9 MiB RAM<br/>Up 37 hours"]
        
        CLAMD["ğŸ¦  clamd-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ClamAV Antivirus<br/>Virus Scanning<br/>ğŸ’¾ 1021 MiB RAM<br/>Up 5 days (healthy)"]
        
        OLEFY["ğŸ“„ olefy-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Office Doc Scanner<br/>Macro Detection<br/>ğŸ’¾ 14.62 MiB RAM"]
        
        NETFILTER["ğŸ”¥ netfilter-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Firewall Rules<br/>Rate Limiting<br/>ğŸ’¾ 29.29 MiB RAM"]
    end
    
    subgraph WEBMAIL["Webmail & Groupware"]
        SOGO["ğŸ“§ sogo-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>SOGo Groupware<br/>Calendar + Contacts<br/>ğŸ’¾ 293.5 MiB RAM<br/>Up 5 days"]
        
        PHP["ğŸ˜ php-fpm-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>PHP Processing<br/>Admin Panel<br/>ğŸ’¾ 143.2 MiB RAM"]
    end
    
    subgraph DATA["Data Layer"]
        MYSQL["ğŸ—ƒï¸ mysql-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>User Database<br/>Configuration<br/>ğŸ’¾ 366.2 MiB RAM<br/>Up 5 days"]
        
        REDIS["âš¡ redis-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Session Cache<br/>Rate Limiting<br/>ğŸ’¾ 17.9 MiB RAM"]
        
        MEMCACHED["ğŸ’¨ memcached-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Object Cache<br/>Performance<br/>ğŸ’¾ 3.406 MiB RAM"]
    end
    
    subgraph DNS["DNS Layer"]
        UNBOUND["ğŸŒ unbound-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>DNS Resolver<br/>DNSBL Checks<br/>ğŸ’¾ 44.56 MiB RAM<br/>Up 5 days (healthy)"]
    end
    
    subgraph MANAGEMENT["Management"]
        WATCHDOG["ğŸ‘ï¸ watchdog-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Health Monitoring<br/>Container Checks<br/>ğŸ’¾ 35.44 MiB RAM"]
        
        ACME["ğŸ” acme-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Let's Encrypt<br/>Certificate Renewal<br/>ğŸ’¾ 2.695 MiB RAM"]
        
        OFELIA["â° ofelia-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Cron Scheduler<br/>Maintenance Tasks<br/>ğŸ’¾ 267.2 MiB RAM"]
        
        DOCKERAPI["ğŸ³ dockerapi-mailcow<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Docker Socket Proxy<br/>Security Layer<br/>ğŸ’¾ 56.15 MiB RAM"]
    end
    
    subgraph LOGS["ğŸ“‹ Recent Activity (Verified)"]
        LOG1["âœ… Spam blocked: 77.90.185.65<br/>DNSBL rank 29<br/>zen.spamhaus.org lists"]
        LOG2["âœ… TLS: TLSv1.3 AES_256_GCM<br/>RSA-PSS 4096-bit"]
        LOG3["âš ï¸ IPv6 disabled<br/>(Address family not supported)"]
    end
    
    %% Connections
    SMTP --> POSTFIX
    IMAP --> DOVECOT
    WEB --> NGINX
    
    NGINX --> SOGO
    NGINX --> PHP
    
    POSTFIX --> RSPAMD
    POSTFIX --> TLSPOL
    RSPAMD --> CLAMD
    RSPAMD --> OLEFY
    
    POSTFIX --> DOVECOT
    
    DOVECOT --> MYSQL
    SOGO --> MYSQL
    SOGO --> REDIS
    SOGO --> MEMCACHED
    
    RSPAMD --> UNBOUND
    
    WATCHDOG --> DOCKERAPI
    ACME --> NGINX
    OFELIA --> POSTFIX
    OFELIA --> DOVECOT
    
    NETFILTER --> POSTFIX
    
    classDef frontend fill:#1565C0,stroke:#0D47A1,color:#fff
    classDef security fill:#C62828,stroke:#B71C1C,color:#fff
    classDef data fill:#7B1FA2,stroke:#4A148C,color:#fff
    classDef mail fill:#2E7D32,stroke:#1B5E20,color:#fff
    classDef mgmt fill:#F57C00,stroke:#E65100,color:#fff
    
    class ENTRY,FRONTEND,NGINX frontend
    class SECURITY,RSPAMD,CLAMD,OLEFY,NETFILTER security
    class DATA,MYSQL,REDIS,MEMCACHED,DNS,UNBOUND data
    class MTA,MDA,POSTFIX,DOVECOT,WEBMAIL,SOGO,PHP mail
    class MANAGEMENT,WATCHDOG,ACME,OFELIA,DOCKERAPI mgmt
```
